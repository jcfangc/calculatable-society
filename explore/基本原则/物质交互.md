以下是我们当前数学世界的完整设计总结：

### 1. **物质表示与性质函数**

   - **物质**：每个物质用一个在 \([0, 2]\) 范围内的数值来表示，作为其「基础材料」。这些数值允许物质在指定范围内进行组合与变换。
   - **性质函数**：物质的性质由一个正弦函数表示，形式为：
     \[
     f(x) = \sin((f_{\text{innate}} + f_{\text{acquired}}) \cdot x \cdot \pi + (\phi_{\text{innate}} + \phi_{\text{acquired}}))
     \]
     其中，\(f_{\text{innate}}\) 和 \(\phi_{\text{innate}}\) 是先天特性，\(f_{\text{acquired}}\) 和 \(\phi_{\text{acquired}}\) 是后天影响。正弦函数确保性质值保持在 \([-1, 1]\) 范围内。

### 2. **时间的复合周期性震荡**

   - **复合周期函数**：时间的周期性震荡作为外部「能量输入」，提供系统的动态变化。复合周期函数为：
     \[
     E(t) = \sin(\omega_{\text{long}} \cdot t) + \frac{1}{256} \sin(256 \cdot \omega_{\text{long}} \cdot t)
     \]
     其中，\(\omega_{\text{long}}\) 表示长期频率，短期频率为长期的 \(1/256\)，振幅也为 \(1/256\)，模拟日夜、季节等周期性影响。

   - **归一化**：使用 min-max 归一化将 \(E(t)\) 标准化至 \([0, 1]\) 区间：
     \[
     E_{\text{norm}}(t) = \frac{128}{257} \cdot \left(E(t) + \frac{257}{256}\right)
     \]

### 3. **性质空间中的相似性计算**

   - **性质向量**：每个物质的性质表示为向量 \(\vec{A} = [a_1, a_2, \dots, a_n]\)，每一维表示一种性质值。
   - **曼哈顿距离**：在性质空间中计算两个物质的曼哈顿距离：
     \[
     D_{\text{Manhattan}} = \sum_{i=1}^n |a_i - b_i|
     \]
   - **汉明比值 \(\eta\)**：将曼哈顿距离转换为二进制表示，计算汉明重量，定义比值为汉明重量与二进制位数的比值，范围在 \([0, 1]\) 之间。相似性越高（\(\eta\) 越小），物质越容易发生反应。

### 4. **反应速率**

   - **反应速率公式**：最终反应速率 \( R(A, B, t) \) 由时间函数和性质相似性比值共同决定：
     \[
     R(A, B, t) = E_{\text{norm}}(t) \cdot (1 - \eta)
     \]
   - **动态调节**：时间的复合周期提供动态能量，性质相似性比值决定物质的匹配度。此组合使得反应速率在不同时间点、不同性质组合下动态变化。

### 5. **反应参数的选择与线性组合**

   - **线性组合**：新物质 \( C \) 由两个物质 \( A \) 和 \( B \) 的线性组合生成，定义为：
     \[
     x_C = (1 - \eta) x_A + \eta x_B
     \]
     其中 \(\alpha = 1 - \eta\) 和 \(\beta = \eta\) 确保组合系数之和为 1，并保证组合后的值在 \([0, 2]\) 范围内。

   - **相似性驱动的比例**：相似性越高（\(\eta\) 越小），新物质更接近相似度更高的物质。这种比例自然决定了生成物质的特征比例。

### 6. **系统特性与应用**

   - **周期性与动态性**：系统随时间复合周期性震荡而不断变化，使反应速率和反应条件动态变化，模拟自然界的周期性现象。
   - **相似性驱动的反应**：通过性质空间中的相似性定义物质的反应条件，使物质的组合与相互作用更加自洽。
   - **能量输入与调控**：时间作为外部「能量」源头，以复合周期影响反应活性，使整个系统充满变化和活力。

### 总结

该设计构建了一个基于周期性输入和性质相似性的数学系统，确保了物质在不同条件下的自发组合与转化。这种机制实现了一个动态平衡、相互作用的数学世界，可以用来模拟自然界的周期性变化、相似性驱动的反应，以及能量输入对系统的调控。


以下是多物质反应模型的完整设计总结，展示如何在数学世界的每个景观点 \((n, m, z)\) 上实现多物质反应：

---

### 模型概述

在这个设计中，物质分布在一个三维景观中，每种物质在二维平面上通过噪声算法（如 Simplex 噪声）随机分布。多个二维平面沿 \(z\)-轴叠加，构成一个三维数学世界。每个点 \((n, m, z)\) 上，物质之间可以发生相互反应。反应通过特定规则控制，以确保模型的可计算性和表达能力。

### 反应算法

在景观点 \((n, m, z)\) 上，多物质的反应遵循以下步骤：

1. **初始化排除名单**  
   设置一个空的排除名单，用来记录在当前时间步中已经尝试但未发生反应的物质。

2. **模拟精度 \( Q \) 的定义**  
   设定模拟精度 \( Q \geq 2 \)，表示每次仅考虑数量最多的前 \( Q \) 种物质参与反应。排除名单内的物质不参与计算。

3. **选择前 \( Q \) 种主要物质集合 \( M \)**  
   选择在点 \((n, m, z)\) 上数量最多的前 \( Q \) 个物质，构成集合 \( M = \{m_1, m_2, \dots, m_Q\} \)。

4. **相似性计算和目标物质选择**  
   - 选择 \( M \) 中某个物质作为目标物质 \( A \)。
   - 计算集合 \( M \) 中其他物质与 \( A \) 的相似性比值 \(\eta\)，以描述物质间在性质空间中的相似程度。
   - 使用基于数量的累积分布函数（CDF），结合数量和相似性来选择与 \( A \) 发生反应的物质 \( mk \)。

5. **反应速率/概率计算**  
   - 计算 \( A \) 和 \( mk \) 的反应速率/概率 \( R \)：
     \[
     R(A, mk, t) = E_{\text{norm}}(t) \cdot (1 - \eta)
     \]
   - 其中 \( E_{\text{norm}}(t) \) 是时间函数的归一化值，表示外部能量的周期性输入；\(1 - \eta\) 表示物质间的相似性权重。
   - 将 \( R \) 转化为一个 CDF，决定反应是否发生。

6. **反应决策**  
   - 若反应未发生，将 \( mk \) 加入排除名单，并重新选择另一个物质进行尝试。
   - 若反应发生，则生成一个新的物质，并进入下一步。

7. **生成新物质**  
   - 使用线性组合计算新物质的属性值：  
     \[
     x_C = (1 - \eta) x_A + \eta x_B
     \]
   - 其中 \( x_A \) 和 \( x_B \) 分别是物质 \( A \) 和 \( mk \) 的基础数值，\(\alpha = 1 - \eta\) 和 \(\beta = \eta\) 确保生成的新物质数值保持在 \([0, 2]\) 范围内。

8. **重复过程直至完成 \( Q \) 次反应尝试**  
   在当前时间步内执行上述步骤 \( Q \) 次，每次反应尝试的结果会影响下一个反应。

---

### 设计关键点

- **周期性能量输入**：通过复合正弦函数 \( E(t) \) 表达时间的周期性影响，用 min-max 归一化确保其值在 \([0, 1]\) 范围内。短期周期和长期周期叠加，提供自然的「日夜」和「季节性」波动。
  
  \[
  E_{\text{norm}}(t) = \frac{128}{257} \cdot \left(\sin(\omega_{\text{long}} \cdot t) + \frac{1}{256} \sin(256 \cdot \omega_{\text{long}} \cdot t) + \frac{257}{256}\right)
  \]

- **相似性驱动的反应**：在性质空间中，使用曼哈顿距离计算物质间的相似性并转化为汉明比值 \(\eta\)，以二进制汉明重量表示相似度。

- **排除名单机制**：排除名单记录已尝试的无效反应，优化计算效率，避免重复计算。

- **多重随机选择的 CDF 机制**：通过基于数量的 CDF 确定反应物质，并使用反应速率 CDF 控制反应发生概率，使得反应更具多样性和自然性。

---

### 时间单位结束和系统演化

每个时间单位内，每个景观点 \((n, m, z)\) 上完成 \( Q \) 次反应尝试，以新物质的生成结束。时间单位结束后，系统进入下一个时间步，所有景观点的物质分布更新，根据新的环境条件和物质分布重新进行反应计算。

---

### 总结

该多物质反应模型在每个点上使用一系列复杂的规则和选择机制，使得物质间的反应具备高度动态性和复杂性，具体特性包括：
- **动态能量周期**：通过时间函数的复合周期影响反应速率。
- **相似性驱动反应选择**：相似物质更倾向发生反应，符合自然规律。
- **概率控制与多重尝试**：结合 CDF 机制和排除名单，增强系统的表达能力和计算效率。
- **自然景观模拟**：在三维空间中通过噪声算法分布物质，纵向叠加形成自然景观，为数学世界中的物质提供多样的交互条件和丰富的演化潜力。

这种设计构建了一个自洽、动态的多物质反应系统，适用于模拟复杂的自然景观和物质间的自发演化。

